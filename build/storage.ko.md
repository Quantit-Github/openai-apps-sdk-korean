---
layout: default
title: 스토리지
lang: ko
---

# 스토리지

Apps SDK를 위한 상태 및 데이터 유지.

## 스토리지가 중요한 이유

Apps SDK는 대화 상태를 자동으로 처리하지만 대부분의 실제 앱은 영구 스토리지도 필요합니다. 가져온 데이터를 캐시하거나 사용자 기본 설정을 추적하거나 컴포넌트 내에서 생성된 아티팩트를 유지해야 할 수 있습니다. 적절한 스토리지 모델을 선택하면 커넥터가 빠르고 안정적이며 규정을 준수하게 유지됩니다.

## 자체 백엔드 사용

이미 API를 실행 중이거나 다중 사용자 협업이 필요한 경우 기존 스토리지 레이어와 통합합니다. 이 모델에서는:

- OAuth를 통해 사용자를 인증하여([인증](/apps-sdk/build/auth) 참조) ChatGPT ID를 내부 계정에 매핑할 수 있습니다.
- 백엔드 API를 사용하여 데이터를 가져오고 변경합니다. 지연 시간을 낮게 유지하세요. 사용자는 컴포넌트가 몇백 밀리초 안에 렌더링되기를 기대합니다.
- 컴포넌트 로드가 실패하더라도 모델이 데이터를 이해할 수 있도록 충분한 구조화된 콘텐츠를 반환합니다.

자체 스토리지를 사용할 때 다음을 계획하세요:

- **데이터 레지던시 및 규정 준수** — PII나 규제 대상 데이터를 전송하기 전에 계약을 체결했는지 확인합니다.
- **속도 제한** — 모델 재시도나 여러 활성 컴포넌트로 인한 급격한 트래픽으로부터 API를 보호합니다.
- **버전 관리** — 저장된 객체에 스키마 버전을 포함하여 기존 대화를 손상시키지 않고 마이그레이션할 수 있도록 합니다.

## 컴포넌트 상태 유지

권한 있는 데이터를 저장하는 위치에 관계없이 명확한 상태 계약을 설계하세요:

- 임시 UI 상태(선택한 탭, 축소된 섹션)에는 `window.openai.setWidgetState`를 사용합니다. 이 상태는 대화와 함께 이동하며 후속 프롬프트 후 컨텍스트를 복원하는 데 이상적입니다.
- 백엔드 또는 관리형 스토리지 레이어에 영구 아티팩트를 유지합니다. 나중에 상관관계를 지을 수 있도록 구조화된 콘텐츠와 `widgetState` 페이로드 모두에 식별자를 포함합니다.
- 병합 충돌을 우아하게 처리: 다른 사용자가 기본 데이터를 업데이트하면 후속 도구 호출을 통해 컴포넌트를 새로고침하고 채팅 기록에 변경 사항을 설명합니다.

## 운영 팁

- **백업 및 모니터링** — MCP 트래픽을 다른 API와 같이 취급합니다. 상관 관계 ID로 도구 호출을 로깅하고 오류 급증을 모니터링합니다.
- **데이터 보존** — 사용자 데이터를 보관하는 기간과 사용자가 접근을 취소할 수 있는 방법에 대한 명확한 정책을 설정합니다.
- **도그푸딩 우선** — 광범위하게 런칭하기 전에 내부 테스터와 함께 스토리지 경로를 실행하여 할당량, 스키마 진화, 재생 시나리오를 검증할 수 있습니다.

스토리지 전략이 갖춰지면 사용자 신뢰를 손상시키지 않으면서 읽기 및 쓰기 시나리오를 안전하게 처리할 수 있습니다.
