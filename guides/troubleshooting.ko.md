---
layout: default
title: 문제 해결
lang: ko
---

# 문제 해결

Apps SDK 앱의 문제를 해결합니다.

## 문제 진단 방법

컴포넌트 렌더링 실패, discovery에서 프롬프트 누락, 인증 루프 등의 문제가 발생하면 먼저 어느 계층에서 문제가 발생했는지 파악해야 합니다: 서버, 컴포넌트, 또는 ChatGPT 클라이언트. 아래 체크리스트는 가장 일반적인 문제와 해결 방법을 다룹니다.

## 서버 측 문제

- **도구가 표시되지 않음**   서버가 실행 중이고 `/mcp` 엔드포인트에 연결되어 있는지 확인하세요. 포트를 변경한 경우 커넥터 URL을 업데이트하고 MCP Inspector를 재시작하세요.
- **구조화된 콘텐츠만 있고 컴포넌트가 없음**   도구 응답이 `_meta["openai/outputTemplate"]`를 `mimeType: "text/html+skybridge"`로 등록된 HTML 리소스로 설정하는지 확인하고, 리소스가 CSP 오류 없이 로드되는지 확인하세요.
- **스키마 불일치 오류**   Pydantic 또는 TypeScript 모델이 `outputSchema`에 명시된 스키마와 일치하는지 확인하세요. 변경 후 타입을 다시 생성하세요.
- **느린 응답**   도구 호출이 수백 밀리초 이상 걸리면 컴포넌트가 느리게 느껴집니다. 백엔드 호출을 프로파일링하고 가능한 경우 결과를 캐싱하세요.

## Widget 문제

- **Widget 로드 실패**   브라우저 콘솔(또는 MCP Inspector 로그)을 열어 CSP 위반이나 번들 누락을 확인하세요. HTML이 컴파일된 JS를 인라인으로 포함하고 모든 종속성이 번들링되어 있는지 확인하세요.
- **드래그 앤 드롭 또는 편집이 유지되지 않음**   각 업데이트 후 `window.openai.setWidgetState`를 호출하는지, 마운트 시 `window.openai.widgetState`에서 재수화하는지 확인하세요.
- **모바일에서의 레이아웃 문제**   `window.openai.displayMode`와 `window.openai.maxHeight`를 검사하여 레이아웃을 조정하세요. 고정 높이나 호버 전용 액션은 피하세요.

## Discovery 및 진입점 문제

- **도구가 트리거되지 않음**   메타데이터를 다시 검토하세요. 설명을 "다음의 경우에 사용..."이라는 표현으로 다시 작성하고, 시작 프롬프트를 업데이트한 후 golden prompt 세트로 다시 테스트하세요.
- **잘못된 도구가 선택됨**   유사한 도구에 명확한 세부 정보를 추가하거나 설명에서 허용되지 않는 시나리오를 명시하세요. 큰 도구를 더 작고 목적에 맞는 도구로 분할하는 것을 고려하세요.
- **런처 순위가 이상함**   디렉토리 메타데이터를 새로 고치고 앱 아이콘과 설명이 사용자가 기대하는 것과 일치하는지 확인하세요.

## 인증 문제

- **401 오류**   ChatGPT가 OAuth 플로우를 다시 시작할 수 있도록 오류 응답에 `WWW-Authenticate` 헤더를 포함하세요. issuer URL과 audience 클레임을 다시 확인하세요.
- **동적 클라이언트 등록 실패**   인증 서버가 `registration_endpoint`를 노출하는지, 새로 생성된 클라이언트에 최소한 하나의 로그인 연결이 활성화되어 있는지 확인하세요.

## 배포 문제

- **Ngrok 터널 타임아웃**   터널을 재시작하고 URL을 공유하기 전에 로컬 서버가 실행 중인지 확인하세요. 프로덕션 환경에서는 헬스 체크가 있는 안정적인 호스팅 제공업체를 사용하세요.
- **프록시 뒤에서 스트리밍 중단**   로드 밸런서나 CDN이 버퍼링 없이 server-sent events 또는 스트리밍 HTTP 응답을 허용하는지 확인하세요.

## 에스컬레이션 시점

위의 사항을 검증했는데도 문제가 지속되는 경우:

- 로그(서버, 컴포넌트 콘솔, ChatGPT 도구 호출 기록)와 스크린샷을 수집하세요.
- 발행한 프롬프트와 모든 확인 대화 상자를 기록하세요.
- OpenAI 파트너 담당자와 세부 정보를 공유하여 내부적으로 문제를 재현할 수 있도록 하세요.

명확한 문제 해결 로그는 처리 시간을 단축하고 사용자를 위한 커넥터의 안정성을 유지합니다.
